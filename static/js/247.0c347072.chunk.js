"use strict";(self.webpackChunk_01_first_project=self.webpackChunk_01_first_project||[]).push([[247],{247:function(e,t,s){s.r(t),s.d(t,{default:function(){return V}});var r=s(5671),n=s(3144),o=s(136),i=s(2882),a=s(8683),u=s(2791),l=s(6070),c=s(2982),d="MyPosts_foto__Wy-Tv",p="Post_item__tQYGj",f=s(184),h=function(e){return(0,f.jsxs)("div",{children:[(0,f.jsxs)("div",{className:p,children:[(0,f.jsx)("img",{src:"https://i1.sndcdn.com/artworks-1W1ucUu0AroJKisi-8sy04w-t500x500.jpg"}),e.message]}),(0,f.jsx)("span",{children:"likes"}),"  ",e.likesCount]})},j=s(6139),x=s(704),v=s(5304),m=s(5558),b=(0,v.D)(10),P=u.memo((function(e){var t=(0,c.Z)(e.postsData).reverse().map((function(e){return(0,f.jsx)(h,{message:e.message,likesCount:e.likesCount},e.id)}));return(0,f.jsxs)("div",{children:[(0,f.jsx)("h2",{children:" My posts"}),(0,f.jsx)(g,{onSubmit:function(t){e.addPost(t.newPostText),t.newPostText=" "}}),(0,f.jsx)("div",{className:d,children:t})]})})),g=function(e){return(0,f.jsxs)("form",{onSubmit:e.handleSubmit,children:[(0,f.jsx)(j.Z,{component:m.g,name:"newPostText",placeholder:"Your post",value:e.newPostText,validate:[v.C,b]}),(0,f.jsxs)("div",{children:[" ",(0,f.jsx)("button",{children:" New post"})]})]})};g=(0,x.Z)({form:"PropfileAddPostForm"})(g);var Z=P,_=s(8687),k=(0,_.$j)((function(e){return{postsData:e.profailPage.postsData,newPostText:e.profailPage.newPostText}}),(function(e){return{addPost:function(t){e((0,l.Wl)(t))}}}))(Z),S=s(885),w=s(2522),y="ProfileInfo_foto__Qiy2A",U="ProfileInfo_user__+76WZ",A="ProfileInfo_contacts__esUHM",C="ProfileInfo_form__Z4Fqt",I="ProfileInfo_formEror__3lrWP",T=function(e){var t=(0,u.useState)(!1),s=(0,S.Z)(t,2),r=s[0],n=s[1],o=(0,u.useState)(e.status),i=(0,S.Z)(o,2),a=i[0],l=i[1];(0,u.useEffect)((function(){l(e.status)}),[e.status]);return(0,f.jsxs)("div",{children:[!r&&(0,f.jsxs)("div",{children:[(0,f.jsx)("b",{children:"Status:"})," ",(0,f.jsxs)("span",{onDoubleClick:function(){n(!0)},children:[" ",e.status||"no status"," "]})]}),r&&(0,f.jsx)("div",{children:(0,f.jsx)("input",{onChange:function(e){l(e.currentTarget.value)},autoFocus:!0,onBlur:function(){n(!1),e.updateUserStatus(a)},value:a})})]})},N=s(4353),O=function(e,t){var s=e.handleSubmit,r=e.profile,n=e.error;return(0,f.jsxs)("form",{className:C,onSubmit:s,children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("b",{children:"Name:"})," ",(0,f.jsx)(j.Z,{placeholder:"name",name:"fullName",component:m.I})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("b",{children:"Looking for a job:"}),(0,f.jsx)(j.Z,{type:"checkbox",name:"lookingForAJob",component:m.I})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("b",{children:"Job description:"}),(0,f.jsx)(j.Z,{component:m.g,name:"lookingForAJobDescription",placeholder:"Your skills",value:"blabla"})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("b",{children:"About me:"}),(0,f.jsx)(j.Z,{component:m.g,name:"aboutMe",placeholder:"write smth about you",value:"blabla"})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("b",{children:"Contacts:"})," ",Object.keys(r.contacts).map((function(e){return(0,f.jsx)("div",{children:(0,f.jsxs)("b",{children:[e,": ",(0,f.jsx)(j.Z,{placeholder:e,name:"contacts."+e,component:m.I})," "]})},e)}))]}),(0,f.jsxs)("div",{children:[" ",(0,f.jsx)("button",{children:"save"})," "]}),n&&(0,f.jsx)("div",{className:I,children:n})]})},D=O=(0,x.Z)({form:"edit-profile",enableReinitialize:!0,destroyOnUnmount:!1})(O),F=function(e){return(0,f.jsxs)("div",{children:[e.isOwner&&(0,f.jsxs)("div",{children:[" ",(0,f.jsx)("button",{onClick:e.goToEditMode,children:"Edit"})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("b",{children:"Name:"})," ",e.profile.fullName]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("b",{children:"Looking for a job:"})," ",e.profile.lookingForAJob?"yes":"no"]}),e.profile.lookingForAJob&&(0,f.jsxs)("div",{children:[(0,f.jsx)("b",{children:"Job description:"})," ",e.profile.lookingForAJobDescription]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("b",{children:"About me:"})," ",e.profile.aboutMe]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("b",{children:"Contacts:"})," ",Object.keys(e.profile.contacts).map((function(t){return(0,f.jsx)(J,{contactTitle:t,contactValue:e.profile.contacts[t]},t)}))]})]})},J=function(e){var t=e.contactTitle,s=e.contactValue;return(0,f.jsxs)("div",{className:A,children:[" ",(0,f.jsx)("b",{children:t})," : ",s," "]})},M=function(e){var t=(0,u.useState)(!1),s=(0,S.Z)(t,2),r=s[0],n=s[1];if(!e.profile)return(0,f.jsx)(w.Z,{});return(0,f.jsx)("div",{className:U,children:(0,f.jsxs)("div",{className:y,children:[(0,f.jsx)("img",{src:e.profile.photos.large||N,alt:"avatar_photo"}),e.isOwner&&(0,f.jsx)("input",{type:"file",onChange:function(t){t.target.files.length&&e.savePhoto(t.target.files[0])}}),r?(0,f.jsx)(D,{initialValues:e.profile,profile:e.profile,onSubmit:function(t){e.saveProfile(t).then((function(){n(!1)}))}}):(0,f.jsx)(F,(0,a.Z)((0,a.Z)({},e),{},{goToEditMode:function(){n(!0)},isOwner:e.isOwner})),(0,f.jsxs)("div",{children:[" ",(0,f.jsx)(T,{status:e.status,updateUserStatus:e.updateUserStatus})," "]})]})})},E=function(e){return(0,f.jsxs)("div",{children:[(0,f.jsx)(M,{isOwner:e.isOwner,savePhoto:e.savePhoto,saveProfile:e.saveProfile,profile:e.profile,status:e.status,updateUserStatus:e.updateUserStatus}),(0,f.jsx)(k,{})]})},W=s(6871),q=s(7781),z=s(1548);var L=function(e){(0,o.Z)(s,e);var t=(0,i.Z)(s);function s(){return(0,r.Z)(this,s),t.apply(this,arguments)}return(0,n.Z)(s,[{key:"updateProfile",value:function(){var e=this.props.router.params.userId;e||(e=this.props.autorizedUserId),this.props.getUserProfile(e),this.props.getUserStatus(e)}},{key:"componentDidMount",value:function(){this.updateProfile()}},{key:"componentDidUpdate",value:function(e){this.props.router.params.userId!==e.router.params.userId&&this.updateProfile()}},{key:"render",value:function(){return(0,f.jsx)(E,(0,a.Z)((0,a.Z)({},this.props),{},{isOwner:!this.props.router.params.userId,profile:this.props.profile,status:this.props.status,updateUserStatus:this.props.updateUserStatus,savePhoto:this.props.savePhoto,saveProfile:this.props.saveProfile}))}}]),s}(u.Component),V=(0,q.qC)((0,_.$j)((function(e){return{profile:e.profailPage.profile,status:e.profailPage.status,autorizedUserId:e.auth.id,isAuth:e.auth.isAuth}}),{getUserProfile:l.et,getUserStatus:l.Tq,updateUserStatus:l.OL,savePhoto:l.Ju,saveProfile:l.Ii}),(function(e){return function(t){var s=(0,W.TH)(),r=(0,W.s0)(),n=(0,W.UO)();return(0,f.jsx)(e,(0,a.Z)((0,a.Z)({},t),{},{router:{location:s,navigate:r,params:n}}))}}),z.D)(L)},1548:function(e,t,s){s.d(t,{D:function(){return f}});var r=s(8683),n=s(5671),o=s(3144),i=s(136),a=s(2882),u=s(2791),l=s(6871),c=s(8687),d=s(184),p=function(e){return{isAuth:e.auth.isAuth}},f=function(e){var t=function(t){(0,i.Z)(u,t);var s=(0,a.Z)(u);function u(){return(0,n.Z)(this,u),s.apply(this,arguments)}return(0,o.Z)(u,[{key:"render",value:function(){return this.props.isAuth?(0,d.jsx)(e,(0,r.Z)({},this.props)):(0,d.jsx)(l.Fg,{to:"/login"})}}]),u}(u.Component);return(0,c.$j)(p)(t)}},4353:function(e,t,s){e.exports=s.p+"static/media/user.f93109ccaf6090e65a5f.png"}}]);
//# sourceMappingURL=247.0c347072.chunk.js.map